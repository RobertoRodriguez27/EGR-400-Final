"use strict";for(var ipc=require("ipc"),remote=require("remote"),Tray=remote.require("tray"),Menu=remote.require("menu"),path=require("path"),soundButtons=document.querySelectorAll(".button-sound"),closeEl=document.querySelector(".close"),settingsEl=document.querySelector(".settings"),trayIcon=null,trayMenu=null,i=0;i<soundButtons.length;i++){var soundButton=soundButtons[i],soundName=soundButton.attributes["data-sound"].value;prepareButton(soundButton,soundName)}function prepareButton(e,n){e.querySelector("span").style.backgroundImage='url("img/icons/'+n+'.png")';var t=new Audio(__dirname+"/wav/"+n+".wav");e.addEventListener("click",function(){t.currentTime=0,t.play()})}closeEl.addEventListener("click",function(){ipc.send("close-main-window")}),settingsEl.addEventListener("click",function(){ipc.send("open-settings-window")}),ipc.on("global-shortcut",function(e){var n=new MouseEvent("click");soundButtons[e].dispatchEvent(n)}),trayIcon="darwin"===process.platform?new Tray(path.join(__dirname,"img/tray-iconTemplate.png")):new Tray(path.join(__dirname,"img/tray-icon-alt.png"));var trayMenuTemplate=[{label:"Sound machine",enabled:!1},{label:"Settings",click:function(){ipc.send("open-settings-window")}},{label:"Quit",click:function(){ipc.send("close-main-window")}}];trayMenu=Menu.buildFromTemplate(trayMenuTemplate),trayIcon.setContextMenu(trayMenu);